import{N as h,g as m,a as g,r as o,s as c,u as y}from"./Navbar.54a7de4d.js";import{b as p}from"./bcrypt.f73a1d77.js";import{_ as v,c as u,e as w,a,ab as i,t as _,b as U,F as b,o as l,f as E}from"./index.58b75e72.js";const M={data(){return{errorMessage:"",isError:!1}},components:{Navbar:h},methods:{signUp:function(){if(this.$refs.username.value===""){this.isError=!0,this.errorMessage="The username field is empty!";return}else if(this.$refs.password.value===""){this.isError=!0,this.errorMessage="The password field is empty!";return}else if(this.$refs.passwordRepeat.value===""){this.isError=!0,this.errorMessage="The repeated password field is empty!";return}else if(this.$refs.password.value!==this.$refs.passwordRepeat.value){this.isError=!0,this.errorMessage="The passwords do not match!";return}const t=m(this.app);var e=!1;try{g(o(t,"users/"+this.$refs.username.value)).then(n=>{n.exists()&&(this.isError=!0,this.errorMessage="The username is already taken!",e=!0)}).then(async()=>{e==!1&&(c(o(t,"users/"+this.$refs.username.value),{password:p.hashSync(this.$refs.password.value,p.genSaltSync())}),y().username=this.$refs.username.value,this.$router.push("/signin")),this.$refs.username.value=""})}catch{this.isError=!0,this.errorMessage="The username can not contain special characters!",this.$refs.username.value=""}}}};const S={key:0,class:"error"};function N(t,e,n,$,d,s){const f=E("Navbar");return l(),u(b,null,[w(f),a("input",{onKeyup:e[0]||(e[0]=i((...r)=>s.signUp&&s.signUp(...r),["enter"])),ref:"username",name:"email",type:"username",placeholder:"Username"},null,544),a("input",{onKeyup:e[1]||(e[1]=i((...r)=>s.signUp&&s.signUp(...r),["enter"])),ref:"password",name:"password",type:"password",placeholder:"Password"},null,544),a("input",{onKeyup:e[2]||(e[2]=i((...r)=>s.signUp&&s.signUp(...r),["enter"])),ref:"passwordRepeat",name:"password-repeat",type:"password",placeholder:"Repeat Password"},null,544),a("button",{type:"button",onClick:e[3]||(e[3]=(...r)=>s.signUp&&s.signUp(...r))},"Sign Up"),this.isError?(l(),u("p",S,_(d.errorMessage),1)):U("",!0)],64)}const K=v(M,[["render",N],["__scopeId","data-v-6a82f0ae"]]);export{K as default};
