import{N as g,o as p,r as v,g as F}from"./Navbar.54a7de4d.js";import{_ as m,c as d,a as r,F as h,r as b,b as D,o as i,d as S,t as u,g as w,e as _,f}from"./index.58b75e72.js";const x={name:"DotFiles",props:{dotFiles:Array},data(){return{currentScreenshot:"",showModal:!1}},methods:{enlarge(e){this.toggleModal(),this.currentScreenshot=e},toggleModal(){console.log(this.showModal),this.showModal=!this.showModal}}},M={class:"dot-files"},N=["src","onClick"],C=r("br",null,null,-1),k=["href"],y=r("br",null,null,-1),U={class:"light-text"},O={key:0,id:"modal",class:"modal open"},$={class:"modal-container"},V=["src"];function L(e,t,l,a,n,o){return i(),d(h,null,[r("div",M,[(i(!0),d(h,null,b(this.dotFiles,s=>(i(),d("div",{key:s.id},[r("div",{class:"dot-file",ref_for:!0,ref:"{{ dotFile.id }}"},[r("img",{src:s.screenshotUrl,class:"dot-file-img",onClick:c=>o.enlarge(s.screenshotUrl)},null,8,N),C,r("a",{href:s.dotfilesUrl},"Download",8,k),S(" "+u(s.user)+"'s dotfiles ",1),y,r("div",U,u(s.date),1)],512)]))),128))]),this.showModal?(i(),d("div",O,[r("div",$,[r("span",{class:"material-symbols-outlined close-modal",onClick:t[0]||(t[0]=(...s)=>o.toggleModal&&o.toggleModal(...s))},"close"),r("img",{src:this.currentScreenshot,class:"modal-img"},null,8,V)])])):D("",!0)],64)}const B=m(x,[["render",L]]),A={name:"Home",components:{DotFiles:B,Navbar:g},data(){return{dotFiles:{id:Number,user:String,date:String,dotfilesUrl:String,screenshotUrl:String},search:""}},created(){p(v(F(w()),"/users/"),e=>{this.updateDotfiles(e)})},methods:{getFiltered(){const e=[];for(var t=0;t<this.dotFiles.length;t++){var l=this.dotFiles[t].user.toLowerCase(),a=this.dotFiles[t].date;(l.indexOf(this.search.toLowerCase())!=-1||a.indexOf(this.search.toLowerCase())!=-1)&&e.push(this.dotFiles[t])}return e},updateFilter(e){this.search=e},updateDotfiles(e){this.dotFiles=[];const t=Object.entries(e.val()).map(([o,s])=>({username:o,data:s}));for(var l=0,a=0;a<t.length;a++){if(t[a].data.dotfiles==null)continue;const o=Object.entries(t[a].data.dotfiles).map(([s,c])=>({name:s,data:c}));for(var n=0;n<o.length;n++){var e=o[n].data;this.dotFiles.push({id:l,user:t[a].username,date:e.date,dotfilesUrl:e.dotfiles_url,screenshotUrl:e.screenshot_url}),l++}}}}};function H(e,t,l,a,n,o){const s=f("Navbar"),c=f("DotFiles");return i(),d(h,null,[_(s,{onOnSearch:o.updateFilter},null,8,["onOnSearch"]),_(c,{dotFiles:o.getFiltered()},null,8,["dotFiles"])],64)}const j=m(A,[["render",H]]);export{j as default};
